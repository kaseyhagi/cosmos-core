<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>COSMOS core: Udp Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo80.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">COSMOS core
   &#160;<span id="projectnumber">1.0.2 (beta)</span>
   </div>
   <div id="projectbrief">Comprehensive Open-architecture Solution for Mission Operations Systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_udp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_udp-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Udp Class Reference<div class="ingroups"><a class="el" href="group__libraries.html">API libraries</a> &raquo; <a class="el" href="group__support.html">Support Libraries</a> &raquo; <a class="el" href="group__socketlib.html">Socket Library</a> &raquo; <a class="el" href="group__socketlib__functions.html">Socket library functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="socketlib_8h_source.html">socketlib.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Udp:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_udp__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acbfd83b59b802720c0016ea9ca691624"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#acbfd83b59b802720c0016ea9ca691624">Udp</a> ()</td></tr>
<tr class="separator:acbfd83b59b802720c0016ea9ca691624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6729ff2a6125dfa2a5eef487c86f32d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">socketOpen</a> ()</td></tr>
<tr class="memdesc:af6729ff2a6125dfa2a5eef487c86f32d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open UDP socket.  <a href="#af6729ff2a6125dfa2a5eef487c86f32d">More...</a><br /></td></tr>
<tr class="separator:af6729ff2a6125dfa2a5eef487c86f32d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49848b39c67350eb2540d0090d973924"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#a49848b39c67350eb2540d0090d973924">setupClient</a> ()</td></tr>
<tr class="separator:a49848b39c67350eb2540d0090d973924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa170e8b9aa9f0aa5363e0df1e774a9f4"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#aa170e8b9aa9f0aa5363e0df1e774a9f4">setupClient</a> (string <a class="el" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a>, uint16_t <a class="el" href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a>)</td></tr>
<tr class="separator:aa170e8b9aa9f0aa5363e0df1e774a9f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc214e26dbcec6c11376fda01a1b84ed"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#afc214e26dbcec6c11376fda01a1b84ed">setupClientSimGen</a> (string <a class="el" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a>, uint16_t <a class="el" href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a>)</td></tr>
<tr class="separator:afc214e26dbcec6c11376fda01a1b84ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b54499c20557632619f30941cebc93"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#a57b54499c20557632619f30941cebc93">setupClientAcstb</a> (string <a class="el" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a>, uint16_t <a class="el" href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a>)</td></tr>
<tr class="separator:a57b54499c20557632619f30941cebc93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d0ab748e69000e97f8083527f63bf56"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#a8d0ab748e69000e97f8083527f63bf56">setupServer</a> (uint16_t <a class="el" href="udp__send_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>, float timeout_sec)</td></tr>
<tr class="separator:a8d0ab748e69000e97f8083527f63bf56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc00db7aa1b193609b78dc3b2a4f2822"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#adc00db7aa1b193609b78dc3b2a4f2822">send</a> (string package2send)</td></tr>
<tr class="separator:adc00db7aa1b193609b78dc3b2a4f2822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81aa091799ae48198e94c1b6a4ba92e5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#a81aa091799ae48198e94c1b6a4ba92e5">receiveLoop</a> ()</td></tr>
<tr class="separator:a81aa091799ae48198e94c1b6a4ba92e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a904f4e5b6e0f6a68e3f751331fe1e9b6"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#a904f4e5b6e0f6a68e3f751331fe1e9b6">receiveOnce</a> ()</td></tr>
<tr class="separator:a904f4e5b6e0f6a68e3f751331fe1e9b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef05f12c31fdb54106fc9e3f70c582a2"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#aef05f12c31fdb54106fc9e3f70c582a2">close</a> ()</td></tr>
<tr class="separator:aef05f12c31fdb54106fc9e3f70c582a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a66de1c36d4371219976ed62931d9ed4f"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#a66de1c36d4371219976ed62931d9ed4f">receivedData</a></td></tr>
<tr class="separator:a66de1c36d4371219976ed62931d9ed4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aa161f85c52f1a670bdebccd46d676baa"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#aa161f85c52f1a670bdebccd46d676baa">openServer</a> ()</td></tr>
<tr class="separator:aa161f85c52f1a670bdebccd46d676baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae37e6536baa48cf24b8a3e3bd7e1a62"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">errorStatus</a> (string functionName)</td></tr>
<tr class="separator:aae37e6536baa48cf24b8a3e3bd7e1a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abbeae23445bf7ff06f49face5c42efcf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_socket_options.html">SocketOptions</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a></td></tr>
<tr class="separator:abbeae23445bf7ff06f49face5c42efcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa97996e9b06a6988727954499ad0dfd1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_udp.html#aa97996e9b06a6988727954499ad0dfd1">iretn</a> = 0</td></tr>
<tr class="separator:aa97996e9b06a6988727954499ad0dfd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acbfd83b59b802720c0016ea9ca691624"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Udp::Udp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="comment">// default values (for Matlab)</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="comment">//sok.address     = &quot;127.0.0.1&quot;;</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">//sok.port        = 8888;</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="comment">//sok(&quot;127.0.0.1&quot;,8888);</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">//sok {&quot;127.0.0.1&quot;,8888};</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">//iretn = init();</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa161f85c52f1a670bdebccd46d676baa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::openServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aae37e6536baa48cf24b8a3e3bd7e1a62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::errorStatus </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>functionName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                           {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    errno = WSAGetLastError();</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    std::cout &lt;&lt; functionName &lt;&lt; <span class="stringliteral">&quot; failed with error code :&quot;</span> &lt;&lt; errno &lt;&lt;  <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; strerror(errno) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Check the Windows Sockets Error Codes to get more information: http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    std::cout &lt;&lt; functionName &lt;&lt; <span class="stringliteral">&quot; failed with error code :&quot;</span> &lt;&lt; errno &lt;&lt;  <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; strerror(errno) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="comment">// return negative error number</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <span class="keywordflow">return</span> -errno;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="comment">//exit(EXIT_FAILURE);</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af6729ff2a6125dfa2a5eef487c86f32d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::socketOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open UDP socket. </p>
<p>Open a UDP socket and configure it for the specified use. Various flags are set, and the socket is bound, if necessary. Support is provided for the extra steps necessary for MS Windows. </p><dl class="section return"><dt>Returns</dt><dd>Zero, or negative error. </dd></dl>
<ol type="1">
<li>Join multicast </li>
</ol>
<div class="fragment"><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;{</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    socklen_t namelen;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    int32_t <a class="code" href="class_udp.html#aa97996e9b06a6988727954499ad0dfd1">iretn</a>;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keyword">struct </span>ip_mreq mreq;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordtype">int</span> on = 1;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="agent__antenna_8cpp.html#a398527b3e9e358c345c5047b16871957">debug</a> = <span class="keyword">false</span>; <span class="comment">//turn on or off debug statements</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nonblocking = 1;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keyword">struct </span>sockaddr_storage ss;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordtype">int</span> sslen;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    WORD wVersionRequested;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    WSADATA wsaData;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> started=<span class="keyword">false</span>;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">//Initialise winsock</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (debug){std::cout &lt;&lt; <span class="stringliteral">&quot;\nInitialising Winsock...&quot;</span>;}</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">if</span> (!started)</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        wVersionRequested = MAKEWORD( 1, 1 );</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="comment">//wVersionRequested = MAKEWORD( 2, 2 );</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="comment">//iretn = WSAStartup( wVersionRequested, &amp;wsaData );</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> ( (iretn=WSAStartup(wVersionRequested,&amp;wsaData)) != 0)</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            <span class="keywordflow">if</span> (debug){printf(<span class="stringliteral">&quot;Failed. Error Code : %d&quot;</span>,WSAGetLastError());</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                <span class="keywordflow">return</span> errno;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            }</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="keywordflow">if</span> (debug){std::cout &lt;&lt; <span class="stringliteral">&quot;Initialised.&quot;</span> &lt;&lt; std::endl;}</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">//Create a socket</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a1c14bf2ee0d5c79bf7cd3f05e2586868">stream</a>){</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = socket(AF_INET, SOCK_STREAM,0)) &lt;0){</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                <span class="keywordflow">if</span> (debug){</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    printf(<span class="stringliteral">&quot;Could not create socket stream: %d&quot;</span> , WSAGetLastError());</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                    printf(<span class="stringliteral">&quot;Could not create socket stream : %d&quot;</span> , errno);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                }</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="comment">//default</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = socket(AF_INET, SOCK_DGRAM,0)) &lt;0){</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <span class="keywordflow">if</span> (debug){</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    printf(<span class="stringliteral">&quot;Could not create socket : %d&quot;</span> , WSAGetLastError());</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                    printf(<span class="stringliteral">&quot;Could not create socket : %d&quot;</span> , errno);</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (debug){std::cout &lt;&lt; <span class="stringliteral">&quot;Socket created&quot;</span> &lt;&lt; std::endl;}</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">blocking</a> == <a class="code" href="group__socketlib__constants.html#ga4282c7371cda115a6cadfd89cf153a05">SOCKET_NONBLOCKING</a>)</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    {</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        iretn = 0;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">if</span> (ioctlsocket(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>, FIONBIO, &amp;nonblocking) != 0)</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            iretn = -WSAGetLastError();</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">if</span> (fcntl(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>, F_SETFL,O_NONBLOCK) &lt; 0)</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            iretn = -errno;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span> (iretn &lt; 0)</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            CLOSE_SOCKET(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = <a class="code" href="class_udp.html#aa97996e9b06a6988727954499ad0dfd1">iretn</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_udp.html#aa97996e9b06a6988727954499ad0dfd1">iretn</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="comment">// this defines the wait time for a response from a request</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">timeout</a>)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordtype">int</span> msectimeo = <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">timeout</a>/1000;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        iretn = setsockopt(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,SOL_SOCKET,SO_RCVTIMEO,(<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;msectimeo,<span class="keyword">sizeof</span>(msectimeo));</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keyword">struct </span>timeval tv;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        tv.tv_sec = <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">timeout</a>/1000000;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        tv.tv_usec = <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">timeout</a>%1000000;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        iretn = setsockopt(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,SOL_SOCKET,SO_RCVTIMEO,(<span class="keywordtype">char</span>*)&amp;tv,<span class="keyword">sizeof</span>(tv));</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">//Prepare the sockaddr_in structure</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    memset(&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in));</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_family = AF_INET;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_port = htons(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a10de4d6673fe7b2b39b9ad6357900d4f">role</a>)</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a>:</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="preprocessor">#ifdef COSMOS_MAC_OS</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">if</span> (setsockopt(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,SOL_SOCKET,SO_REUSEPORT,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on)) &lt; 0)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">if</span> (setsockopt(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,SOL_SOCKET,SO_REUSEADDR,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on)) &lt; 0)</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            CLOSE_SOCKET(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = -errno;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_addr.s_addr = htonl(INADDR_ANY);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="comment">//Bind</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">if</span> (::bind(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,(<span class="keyword">struct</span> sockaddr *)&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>, <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">addrlen</a>) &lt; 0) <span class="comment">//addrlen = sizeof(struct sockaddr_in)</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;            <span class="keywordflow">if</span> (debug){</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                printf(<span class="stringliteral">&quot;Bind failed with error code : %d&quot;</span> , WSAGetLastError());</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            CLOSE_SOCKET(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = -errno;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">if</span> (debug){std::cout &lt;&lt; <span class="stringliteral">&quot;Bind done&quot;</span> &lt;&lt; std::endl;}</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="comment">// If we bound to port 0, then find out what our assigned port is.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a>)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            namelen = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <span class="keywordflow">if</span> ((iretn = getsockname(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>, (sockaddr*)&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>, &amp;namelen)) == -1)</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                CLOSE_SOCKET(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = -errno;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a> = ntohs(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_port);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="comment">//&gt;&gt;</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="comment">//port = port;</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a3b74d30c67763d41909d6352eee91eda">type</a> == <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>)</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            mreq.imr_multiaddr.s_addr = inet_addr(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a>.c_str());</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            mreq.imr_interface.s_addr = htonl(INADDR_ANY);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <span class="keywordflow">if</span> (setsockopt(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>, IPPROTO_IP, IP_ADD_MEMBERSHIP, (<span class="keywordtype">char</span>*)&amp;mreq, <span class="keyword">sizeof</span>(mreq)) &lt; 0)</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                CLOSE_SOCKET(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = -errno;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ga9c66a2722aa27ee797dd90c48bbc72e7">SOCKET_JABBER</a>:</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a3b74d30c67763d41909d6352eee91eda">type</a>)</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>:</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keywordflow">if</span> ((iretn=setsockopt(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,SOL_SOCKET,SO_BROADCAST,(<span class="keywordtype">char</span>*)&amp;on,<span class="keyword">sizeof</span>(on))) &lt; 0)</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                CLOSE_SOCKET(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a> = -errno;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_addr.s_addr = 0xffffffff;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a>:</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">#ifndef COSMOS_WIN_OS</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            inet_pton(AF_INET,<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a>.c_str(),&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_addr);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            sslen = <span class="keyword">sizeof</span>(ss);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            WSAStringToAddressA((LPSTR)<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a>.c_str(),AF_INET,NULL,(<span class="keyword">struct </span>sockaddr*)&amp;ss,&amp;sslen);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ss)-&gt;sin_addr;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="group__error__defines.html#gaa45c05318f5acf769365533ba22be3cb">SOCKET_ERROR_PROTOCOL</a>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="comment">// &gt;&gt;</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="comment">//port = port;</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="comment">//------------------------------------------------------</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__socketlib__constants.html#gaff2b5308ceb89f1c50f2e8dcf079cf16">SOCKET_TALK</a>:</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">#ifndef COSMOS_WIN_OS</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        inet_pton(AF_INET,<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a>.c_str(),&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_addr);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        sslen = <span class="keyword">sizeof</span>(ss);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        WSAStringToAddressA((LPSTR)<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a>.c_str(),AF_INET,NULL,(<span class="keyword">struct </span>sockaddr*)&amp;ss,&amp;sslen);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_addr = ((<span class="keyword">struct </span>sockaddr_in *)&amp;ss)-&gt;sin_addr;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <span class="comment">//&gt;&gt;</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="comment">//port = port;</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a37d35c76ed2948a37656bb7f33ad3d55">connect</a>){</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            <span class="keywordflow">if</span> ((iretn=connect(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>, (<span class="keyword">struct</span> sockaddr *)&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>, <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">addrlen</a>)) &lt; 0)</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;            {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                iretn = WSAGetLastError();</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                <span class="keywordflow">if</span> (iretn != WSAEWOULDBLOCK)</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    <span class="keywordflow">return</span> (errno);</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                iretn = errno;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                <span class="keywordflow">if</span> (iretn != EINPROGRESS)</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                    <span class="keywordflow">return</span> (errno);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                COSMOS_SLEEP(1);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div><div class="ttc" id="struct_socket_options_html_a37d35c76ed2948a37656bb7f33ad3d55"><div class="ttname"><a href="struct_socket_options.html#a37d35c76ed2948a37656bb7f33ad3d55">SocketOptions::connect</a></div><div class="ttdeci">bool connect</div><div class="ttdef"><b>Definition:</b> socketlib.h:173</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></div><div class="ttdoc">Agent socket using Unicast UDP. </div></div>
<div class="ttc" id="class_udp_html_aa97996e9b06a6988727954499ad0dfd1"><div class="ttname"><a href="class_udp.html#aa97996e9b06a6988727954499ad0dfd1">Udp::iretn</a></div><div class="ttdeci">int32_t iretn</div><div class="ttdef"><b>Definition:</b> socketlib.h:216</div></div>
<div class="ttc" id="group__error__defines_html_gaa45c05318f5acf769365533ba22be3cb"><div class="ttname"><a href="group__error__defines.html#gaa45c05318f5acf769365533ba22be3cb">SOCKET_ERROR_PROTOCOL</a></div><div class="ttdeci">#define SOCKET_ERROR_PROTOCOL</div><div class="ttdef"><b>Definition:</b> cosmos-errno.h:230</div></div>
<div class="ttc" id="struct_socket_options_html_a3b74d30c67763d41909d6352eee91eda"><div class="ttname"><a href="struct_socket_options.html#a3b74d30c67763d41909d6352eee91eda">SocketOptions::type</a></div><div class="ttdeci">NetworkType type</div><div class="ttdef"><b>Definition:</b> socketlib.h:166</div></div>
<div class="ttc" id="struct_socket_options_html_a6cf4f333f43308fa99c46612c056b81c"><div class="ttname"><a href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">SocketOptions::address</a></div><div class="ttdeci">string address</div><div class="ttdef"><b>Definition:</b> socketlib.h:176</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga4282c7371cda115a6cadfd89cf153a05"><div class="ttname"><a href="group__socketlib__constants.html#ga4282c7371cda115a6cadfd89cf153a05">SOCKET_NONBLOCKING</a></div><div class="ttdeci">#define SOCKET_NONBLOCKING</div><div class="ttdoc">Non-blocking Agent. </div><div class="ttdef"><b>Definition:</b> socketlib.h:80</div></div>
<div class="ttc" id="group__socketlib__constants_html_gaff2b5308ceb89f1c50f2e8dcf079cf16"><div class="ttname"><a href="group__socketlib__constants.html#gaff2b5308ceb89f1c50f2e8dcf079cf16">SOCKET_TALK</a></div><div class="ttdeci">#define SOCKET_TALK</div><div class="ttdoc">Talk followed by optional listen (sendto address) </div><div class="ttdef"><b>Definition:</b> socketlib.h:82</div></div>
<div class="ttc" id="struct_socket_options_html_ac9e86d0d9c88009fff1297e380e88c33"><div class="ttname"><a href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">SocketOptions::addrlen</a></div><div class="ttdeci">int addrlen</div><div class="ttdef"><b>Definition:</b> socketlib.h:181</div></div>
<div class="ttc" id="struct_socket_options_html_a81e31ac679b00160c4e59a5889925d72"><div class="ttname"><a href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">SocketOptions::handle</a></div><div class="ttdeci">int32_t handle</div><div class="ttdef"><b>Definition:</b> socketlib.h:168</div></div>
<div class="ttc" id="struct_socket_options_html_acffe0c6a1eeb5377fa22d48293bead57"><div class="ttname"><a href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">SocketOptions::blocking</a></div><div class="ttdeci">bool blocking</div><div class="ttdef"><b>Definition:</b> socketlib.h:184</div></div>
<div class="ttc" id="struct_socket_options_html_a1c14bf2ee0d5c79bf7cd3f05e2586868"><div class="ttname"><a href="struct_socket_options.html#a1c14bf2ee0d5c79bf7cd3f05e2586868">SocketOptions::stream</a></div><div class="ttdeci">bool stream</div><div class="ttdef"><b>Definition:</b> socketlib.h:187</div></div>
<div class="ttc" id="struct_socket_options_html_a10de4d6673fe7b2b39b9ad6357900d4f"><div class="ttname"><a href="struct_socket_options.html#a10de4d6673fe7b2b39b9ad6357900d4f">SocketOptions::role</a></div><div class="ttdeci">uint16_t role</div><div class="ttdef"><b>Definition:</b> socketlib.h:183</div></div>
<div class="ttc" id="struct_socket_options_html_a16b687e807ffba5c373858e8cca6b49e"><div class="ttname"><a href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">SocketOptions::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> socketlib.h:178</div></div>
<div class="ttc" id="struct_socket_options_html_a25451af715bdf02b3ad51ecdf46ccd6e"><div class="ttname"><a href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">SocketOptions::timeout</a></div><div class="ttdeci">uint32_t timeout</div><div class="ttdef"><b>Definition:</b> socketlib.h:185</div></div>
<div class="ttc" id="agent__antenna_8cpp_html_a398527b3e9e358c345c5047b16871957"><div class="ttname"><a href="agent__antenna_8cpp.html#a398527b3e9e358c345c5047b16871957">debug</a></div><div class="ttdeci">static bool debug</div><div class="ttdef"><b>Definition:</b> agent_antenna.cpp:162</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga79ccaa6b292ff02f81a7144830bea4a2"><div class="ttname"><a href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a></div><div class="ttdeci">#define SOCKET_LISTEN</div><div class="ttdoc">Listen followed by optional talk (recvfrom INADDRANY) </div><div class="ttdef"><b>Definition:</b> socketlib.h:84</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga9c66a2722aa27ee797dd90c48bbc72e7"><div class="ttname"><a href="group__socketlib__constants.html#ga9c66a2722aa27ee797dd90c48bbc72e7">SOCKET_JABBER</a></div><div class="ttdeci">#define SOCKET_JABBER</div><div class="ttdoc">Talk over multiple interfaces. </div><div class="ttdef"><b>Definition:</b> socketlib.h:88</div></div>
<div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfa8e919d17ef085bfa7f29765019241f32">NetworkType::MULTICAST</a></div><div class="ttdoc">Agent socket using Multicast UDP. </div></div>
<div class="ttc" id="struct_socket_options_html_a2cc24af6b485d9d0f4994ff2194f05ed"><div class="ttname"><a href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">SocketOptions::server</a></div><div class="ttdeci">struct sockaddr_in server</div><div class="ttdef"><b>Definition:</b> socketlib.h:170</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49848b39c67350eb2540d0090d973924"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::setupClient </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">socketOpen</a>();</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;}</div><div class="ttc" id="class_udp_html_af6729ff2a6125dfa2a5eef487c86f32d"><div class="ttname"><a href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">Udp::socketOpen</a></div><div class="ttdeci">int32_t socketOpen()</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:707</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa170e8b9aa9f0aa5363e0df1e774a9f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::setupClient </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                                            {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="comment">// config</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a> = <a class="code" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a> = <a class="code" href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">socketOpen</a>();</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;}</div><div class="ttc" id="struct_socket_options_html_a6cf4f333f43308fa99c46612c056b81c"><div class="ttname"><a href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">SocketOptions::address</a></div><div class="ttdeci">string address</div><div class="ttdef"><b>Definition:</b> socketlib.h:176</div></div>
<div class="ttc" id="gauss__jackson__test_8cpp_html_a581f9e6b0ae1bb5b0a323185403461cf"><div class="ttname"><a href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a></div><div class="ttdeci">static double * p</div><div class="ttdef"><b>Definition:</b> gauss_jackson_test.cpp:42</div></div>
<div class="ttc" id="struct_socket_options_html_a16b687e807ffba5c373858e8cca6b49e"><div class="ttname"><a href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">SocketOptions::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> socketlib.h:178</div></div>
<div class="ttc" id="eci2kep__test_8cpp_html_aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63"><div class="ttname"><a href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a></div><div class="ttdef"><b>Definition:</b> eci2kep_test.cpp:33</div></div>
<div class="ttc" id="class_udp_html_af6729ff2a6125dfa2a5eef487c86f32d"><div class="ttname"><a href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">Udp::socketOpen</a></div><div class="ttdeci">int32_t socketOpen()</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:707</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afc214e26dbcec6c11376fda01a1b84ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::setupClientSimGen </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                                  {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// config</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a>     = <a class="code" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a>        = <a class="code" href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">blocking</a>    = <a class="code" href="group__socketlib__constants.html#ga4282c7371cda115a6cadfd89cf153a05">SOCKET_NONBLOCKING</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a1c14bf2ee0d5c79bf7cd3f05e2586868">stream</a>      = <span class="keyword">true</span>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">timeout</a>     = 0;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a37d35c76ed2948a37656bb7f33ad3d55">connect</a>     = <span class="keyword">true</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">socketOpen</a>();</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;}</div><div class="ttc" id="struct_socket_options_html_a37d35c76ed2948a37656bb7f33ad3d55"><div class="ttname"><a href="struct_socket_options.html#a37d35c76ed2948a37656bb7f33ad3d55">SocketOptions::connect</a></div><div class="ttdeci">bool connect</div><div class="ttdef"><b>Definition:</b> socketlib.h:173</div></div>
<div class="ttc" id="struct_socket_options_html_a6cf4f333f43308fa99c46612c056b81c"><div class="ttname"><a href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">SocketOptions::address</a></div><div class="ttdeci">string address</div><div class="ttdef"><b>Definition:</b> socketlib.h:176</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga4282c7371cda115a6cadfd89cf153a05"><div class="ttname"><a href="group__socketlib__constants.html#ga4282c7371cda115a6cadfd89cf153a05">SOCKET_NONBLOCKING</a></div><div class="ttdeci">#define SOCKET_NONBLOCKING</div><div class="ttdoc">Non-blocking Agent. </div><div class="ttdef"><b>Definition:</b> socketlib.h:80</div></div>
<div class="ttc" id="gauss__jackson__test_8cpp_html_a581f9e6b0ae1bb5b0a323185403461cf"><div class="ttname"><a href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a></div><div class="ttdeci">static double * p</div><div class="ttdef"><b>Definition:</b> gauss_jackson_test.cpp:42</div></div>
<div class="ttc" id="struct_socket_options_html_acffe0c6a1eeb5377fa22d48293bead57"><div class="ttname"><a href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">SocketOptions::blocking</a></div><div class="ttdeci">bool blocking</div><div class="ttdef"><b>Definition:</b> socketlib.h:184</div></div>
<div class="ttc" id="struct_socket_options_html_a1c14bf2ee0d5c79bf7cd3f05e2586868"><div class="ttname"><a href="struct_socket_options.html#a1c14bf2ee0d5c79bf7cd3f05e2586868">SocketOptions::stream</a></div><div class="ttdeci">bool stream</div><div class="ttdef"><b>Definition:</b> socketlib.h:187</div></div>
<div class="ttc" id="struct_socket_options_html_a16b687e807ffba5c373858e8cca6b49e"><div class="ttname"><a href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">SocketOptions::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> socketlib.h:178</div></div>
<div class="ttc" id="struct_socket_options_html_a25451af715bdf02b3ad51ecdf46ccd6e"><div class="ttname"><a href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">SocketOptions::timeout</a></div><div class="ttdeci">uint32_t timeout</div><div class="ttdef"><b>Definition:</b> socketlib.h:185</div></div>
<div class="ttc" id="eci2kep__test_8cpp_html_aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63"><div class="ttname"><a href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a></div><div class="ttdef"><b>Definition:</b> eci2kep_test.cpp:33</div></div>
<div class="ttc" id="class_udp_html_af6729ff2a6125dfa2a5eef487c86f32d"><div class="ttname"><a href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">Udp::socketOpen</a></div><div class="ttdeci">int32_t socketOpen()</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:707</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57b54499c20557632619f30941cebc93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::setupClientAcstb </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                                                 {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="comment">// config</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">address</a>     = <a class="code" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a>;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a>        = <a class="code" href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">blocking</a>    = <a class="code" href="group__socketlib__constants.html#ga4282c7371cda115a6cadfd89cf153a05">SOCKET_NONBLOCKING</a>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a1c14bf2ee0d5c79bf7cd3f05e2586868">stream</a>      = <span class="keyword">true</span>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">timeout</a>     = 0;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a37d35c76ed2948a37656bb7f33ad3d55">connect</a>     = <span class="keyword">true</span>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">socketOpen</a>();</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;}</div><div class="ttc" id="struct_socket_options_html_a37d35c76ed2948a37656bb7f33ad3d55"><div class="ttname"><a href="struct_socket_options.html#a37d35c76ed2948a37656bb7f33ad3d55">SocketOptions::connect</a></div><div class="ttdeci">bool connect</div><div class="ttdef"><b>Definition:</b> socketlib.h:173</div></div>
<div class="ttc" id="struct_socket_options_html_a6cf4f333f43308fa99c46612c056b81c"><div class="ttname"><a href="struct_socket_options.html#a6cf4f333f43308fa99c46612c056b81c">SocketOptions::address</a></div><div class="ttdeci">string address</div><div class="ttdef"><b>Definition:</b> socketlib.h:176</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga4282c7371cda115a6cadfd89cf153a05"><div class="ttname"><a href="group__socketlib__constants.html#ga4282c7371cda115a6cadfd89cf153a05">SOCKET_NONBLOCKING</a></div><div class="ttdeci">#define SOCKET_NONBLOCKING</div><div class="ttdoc">Non-blocking Agent. </div><div class="ttdef"><b>Definition:</b> socketlib.h:80</div></div>
<div class="ttc" id="gauss__jackson__test_8cpp_html_a581f9e6b0ae1bb5b0a323185403461cf"><div class="ttname"><a href="gauss__jackson__test_8cpp.html#a581f9e6b0ae1bb5b0a323185403461cf">p</a></div><div class="ttdeci">static double * p</div><div class="ttdef"><b>Definition:</b> gauss_jackson_test.cpp:42</div></div>
<div class="ttc" id="struct_socket_options_html_acffe0c6a1eeb5377fa22d48293bead57"><div class="ttname"><a href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">SocketOptions::blocking</a></div><div class="ttdeci">bool blocking</div><div class="ttdef"><b>Definition:</b> socketlib.h:184</div></div>
<div class="ttc" id="struct_socket_options_html_a1c14bf2ee0d5c79bf7cd3f05e2586868"><div class="ttname"><a href="struct_socket_options.html#a1c14bf2ee0d5c79bf7cd3f05e2586868">SocketOptions::stream</a></div><div class="ttdeci">bool stream</div><div class="ttdef"><b>Definition:</b> socketlib.h:187</div></div>
<div class="ttc" id="struct_socket_options_html_a16b687e807ffba5c373858e8cca6b49e"><div class="ttname"><a href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">SocketOptions::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> socketlib.h:178</div></div>
<div class="ttc" id="struct_socket_options_html_a25451af715bdf02b3ad51ecdf46ccd6e"><div class="ttname"><a href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">SocketOptions::timeout</a></div><div class="ttdeci">uint32_t timeout</div><div class="ttdef"><b>Definition:</b> socketlib.h:185</div></div>
<div class="ttc" id="eci2kep__test_8cpp_html_aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63"><div class="ttname"><a href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaaa91fb0824da12f8bb3b74dd78fb13b63">a</a></div><div class="ttdef"><b>Definition:</b> eci2kep_test.cpp:33</div></div>
<div class="ttc" id="class_udp_html_af6729ff2a6125dfa2a5eef487c86f32d"><div class="ttname"><a href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">Udp::socketOpen</a></div><div class="ttdeci">int32_t socketOpen()</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:707</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d0ab748e69000e97f8083527f63bf56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::setupServer </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>timeout_sec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                                                        {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="comment">// the sok.server does not need an ip because it runs on the</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="comment">// local computer (with preassigned ip)</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a>        = <a class="code" href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a3b74d30c67763d41909d6352eee91eda">type</a>        = <a class="code" href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a10de4d6673fe7b2b39b9ad6357900d4f">role</a>        = <a class="code" href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">blocking</a>    = <a class="code" href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">timeout</a>     = timeout_sec*1000000;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="comment">//    int socket_timeout = 0;</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">//    if (timeout == 0){</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">//        socket_timeout = SOCKET_RCVTIMEO;</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">//    } else {</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">//        socket_timeout = timeout;</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="comment">//    }</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="class_udp.html#aa97996e9b06a6988727954499ad0dfd1">iretn</a>=<a class="code" href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">socketOpen</a>()) &lt; 0)</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keywordflow">return</span> (-errno);</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div><div class="ttc" id="group__socketlib__constants_html_ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9"><div class="ttname"><a href="group__socketlib__constants.html#ggac3df430da2e0e847835025092b9dfdcfaf5ef036b4d8b630721e51fe23489fbc9">NetworkType::UDP</a></div><div class="ttdoc">Agent socket using Unicast UDP. </div></div>
<div class="ttc" id="class_udp_html_aa97996e9b06a6988727954499ad0dfd1"><div class="ttname"><a href="class_udp.html#aa97996e9b06a6988727954499ad0dfd1">Udp::iretn</a></div><div class="ttdeci">int32_t iretn</div><div class="ttdef"><b>Definition:</b> socketlib.h:216</div></div>
<div class="ttc" id="struct_socket_options_html_a3b74d30c67763d41909d6352eee91eda"><div class="ttname"><a href="struct_socket_options.html#a3b74d30c67763d41909d6352eee91eda">SocketOptions::type</a></div><div class="ttdeci">NetworkType type</div><div class="ttdef"><b>Definition:</b> socketlib.h:166</div></div>
<div class="ttc" id="struct_socket_options_html_acffe0c6a1eeb5377fa22d48293bead57"><div class="ttname"><a href="struct_socket_options.html#acffe0c6a1eeb5377fa22d48293bead57">SocketOptions::blocking</a></div><div class="ttdeci">bool blocking</div><div class="ttdef"><b>Definition:</b> socketlib.h:184</div></div>
<div class="ttc" id="struct_socket_options_html_a10de4d6673fe7b2b39b9ad6357900d4f"><div class="ttname"><a href="struct_socket_options.html#a10de4d6673fe7b2b39b9ad6357900d4f">SocketOptions::role</a></div><div class="ttdeci">uint16_t role</div><div class="ttdef"><b>Definition:</b> socketlib.h:183</div></div>
<div class="ttc" id="struct_socket_options_html_a16b687e807ffba5c373858e8cca6b49e"><div class="ttname"><a href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">SocketOptions::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> socketlib.h:178</div></div>
<div class="ttc" id="group__socketlib__constants_html_gac29168deb0d3412d231cca522ece72bb"><div class="ttname"><a href="group__socketlib__constants.html#gac29168deb0d3412d231cca522ece72bb">SOCKET_BLOCKING</a></div><div class="ttdeci">#define SOCKET_BLOCKING</div><div class="ttdoc">Blocking Agent. </div><div class="ttdef"><b>Definition:</b> socketlib.h:78</div></div>
<div class="ttc" id="struct_socket_options_html_a25451af715bdf02b3ad51ecdf46ccd6e"><div class="ttname"><a href="struct_socket_options.html#a25451af715bdf02b3ad51ecdf46ccd6e">SocketOptions::timeout</a></div><div class="ttdeci">uint32_t timeout</div><div class="ttdef"><b>Definition:</b> socketlib.h:185</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga79ccaa6b292ff02f81a7144830bea4a2"><div class="ttname"><a href="group__socketlib__constants.html#ga79ccaa6b292ff02f81a7144830bea4a2">SOCKET_LISTEN</a></div><div class="ttdeci">#define SOCKET_LISTEN</div><div class="ttdoc">Listen followed by optional talk (recvfrom INADDRANY) </div><div class="ttdef"><b>Definition:</b> socketlib.h:84</div></div>
<div class="ttc" id="class_udp_html_af6729ff2a6125dfa2a5eef487c86f32d"><div class="ttname"><a href="class_udp.html#af6729ff2a6125dfa2a5eef487c86f32d">Udp::socketOpen</a></div><div class="ttdeci">int32_t socketOpen()</div><div class="ttdoc">Open UDP socket. </div><div class="ttdef"><b>Definition:</b> socketlib.cpp:707</div></div>
<div class="ttc" id="netperf__listen_8cpp_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="netperf__listen_8cpp.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> netperf_listen.cpp:70</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc00db7aa1b193609b78dc3b2a4f2822"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::send </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>package2send</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                                    {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordflow">if</span> (sendto(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,                      <span class="comment">// socket</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;               package2send.c_str(),            <span class="comment">// buffer to send</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;               strlen(package2send.c_str()),    <span class="comment">// size of buffer</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;               0,                               <span class="comment">// flags</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;               (<span class="keyword">struct</span> sockaddr *)&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>,  <span class="comment">// socket address</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;               <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">addrlen</a>)                     <span class="comment">// size of address to socket pointer //sizeof(struct sockaddr_in))</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        &lt; 0){</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">errorStatus</a>(<span class="stringliteral">&quot;Udp::send&quot;</span>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="comment">//std::cout &lt;&lt; &quot;sent: &quot; &lt;&lt; package2send &lt;&lt; std::endl;</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">// return 0 on sucess</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div><div class="ttc" id="class_udp_html_aae37e6536baa48cf24b8a3e3bd7e1a62"><div class="ttname"><a href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">Udp::errorStatus</a></div><div class="ttdeci">int32_t errorStatus(string functionName)</div><div class="ttdef"><b>Definition:</b> socketlib.cpp:1075</div></div>
<div class="ttc" id="struct_socket_options_html_ac9e86d0d9c88009fff1297e380e88c33"><div class="ttname"><a href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">SocketOptions::addrlen</a></div><div class="ttdeci">int addrlen</div><div class="ttdef"><b>Definition:</b> socketlib.h:181</div></div>
<div class="ttc" id="struct_socket_options_html_a81e31ac679b00160c4e59a5889925d72"><div class="ttname"><a href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">SocketOptions::handle</a></div><div class="ttdeci">int32_t handle</div><div class="ttdef"><b>Definition:</b> socketlib.h:168</div></div>
<div class="ttc" id="struct_socket_options_html_a2cc24af6b485d9d0f4994ff2194f05ed"><div class="ttname"><a href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">SocketOptions::server</a></div><div class="ttdeci">struct sockaddr_in server</div><div class="ttdef"><b>Definition:</b> socketlib.h:170</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a81aa091799ae48198e94c1b6a4ba92e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::receiveLoop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                        {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="rw__test_8cpp.html#aaf89e0814a79d60c1a986f07766a4f85">buf</a>[<a class="code" href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a>];</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordtype">int</span> recv_len;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">//keep listening for data</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Waiting for data...&quot;</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordflow">while</span>(1){</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        <span class="comment">//clear the buffer by filling null, it might have previously received data</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        memset(buf,<span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <span class="comment">//try to receive some data, this is a blocking call</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordflow">if</span> ((recv_len = recvfrom(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                                 buf,</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                                 <a class="code" href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a>,</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                                 0,</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                                 (<span class="keyword">struct</span> sockaddr *) &amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a63c52bef921eae21fdf1e9ae0a674718">s_other</a>,</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                 (socklen_t *)&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">addrlen</a>)) &lt; 0){</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">errorStatus</a>(<span class="stringliteral">&quot;Udp::receiveLoop&quot;</span>);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">if</span> (recv_len &gt; 0) {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="comment">//print details of the client/peer and the data received</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Received packet from &quot;</span> &lt;&lt; inet_ntoa(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">server</a>.sin_addr) &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; ntohs(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">port</a>) &lt;&lt; std::endl;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Data: &quot;</span> &lt;&lt; buf &lt;&lt; std::endl;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            recv_len = 0;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        }</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="comment">//now reply the client with the same data</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">if</span> (sendto(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                   buf,</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                   recv_len,</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                   0,</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                   (<span class="keyword">struct</span> sockaddr*) &amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a63c52bef921eae21fdf1e9ae0a674718">s_other</a>,</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                   <a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">addrlen</a>) &lt; 0){</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">errorStatus</a>(<span class="stringliteral">&quot;Udp::receiveLoop&quot;</span>);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        }</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;}</div><div class="ttc" id="class_udp_html_aae37e6536baa48cf24b8a3e3bd7e1a62"><div class="ttname"><a href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">Udp::errorStatus</a></div><div class="ttdeci">int32_t errorStatus(string functionName)</div><div class="ttdef"><b>Definition:</b> socketlib.cpp:1075</div></div>
<div class="ttc" id="struct_socket_options_html_ac9e86d0d9c88009fff1297e380e88c33"><div class="ttname"><a href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">SocketOptions::addrlen</a></div><div class="ttdeci">int addrlen</div><div class="ttdef"><b>Definition:</b> socketlib.h:181</div></div>
<div class="ttc" id="struct_socket_options_html_a81e31ac679b00160c4e59a5889925d72"><div class="ttname"><a href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">SocketOptions::handle</a></div><div class="ttdeci">int32_t handle</div><div class="ttdef"><b>Definition:</b> socketlib.h:168</div></div>
<div class="ttc" id="struct_socket_options_html_a16b687e807ffba5c373858e8cca6b49e"><div class="ttname"><a href="struct_socket_options.html#a16b687e807ffba5c373858e8cca6b49e">SocketOptions::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> socketlib.h:178</div></div>
<div class="ttc" id="struct_socket_options_html_a63c52bef921eae21fdf1e9ae0a674718"><div class="ttname"><a href="struct_socket_options.html#a63c52bef921eae21fdf1e9ae0a674718">SocketOptions::s_other</a></div><div class="ttdeci">struct sockaddr_in s_other</div><div class="ttdef"><b>Definition:</b> socketlib.h:171</div></div>
<div class="ttc" id="rw__test_8cpp_html_aaf89e0814a79d60c1a986f07766a4f85"><div class="ttname"><a href="rw__test_8cpp.html#aaf89e0814a79d60c1a986f07766a4f85">buf</a></div><div class="ttdeci">char buf[128]</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:40</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga0697298480c6dfd831c7d3df35d7e37d"><div class="ttname"><a href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a></div><div class="ttdeci">#define SOCKET_BUFFER_LENGTH</div><div class="ttdef"><b>Definition:</b> socketlib.h:105</div></div>
<div class="ttc" id="struct_socket_options_html_a2cc24af6b485d9d0f4994ff2194f05ed"><div class="ttname"><a href="struct_socket_options.html#a2cc24af6b485d9d0f4994ff2194f05ed">SocketOptions::server</a></div><div class="ttdeci">struct sockaddr_in server</div><div class="ttdef"><b>Definition:</b> socketlib.h:170</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a904f4e5b6e0f6a68e3f751331fe1e9b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::receiveOnce </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                        {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="comment">// collects the data from the Udp channel</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="comment">// and puts into the receivedData string</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">// that is defined on the Udp class</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="rw__test_8cpp.html#aaf89e0814a79d60c1a986f07766a4f85">buf</a>[<a class="code" href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a>];</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordtype">int</span> recv_len = -1;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">//keep listening for data</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="comment">//std::cout &lt;&lt; &quot;Waiting for data...&quot;;</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">//clear the buffer by filling null, it might have previously received data</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    memset(buf,<span class="charliteral">&#39;\0&#39;</span>, <a class="code" href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a>);</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="class_elapsed_time.html">ElapsedTime</a> ep;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    ep.<a class="code" href="class_elapsed_time.html#ab373e7766d7a55f758c6e85944ad4f5b">print</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    ep.<a class="code" href="class_elapsed_time.html#a70ac672f907da6ec1c3cc8c1a9a1a9ca">tic</a>();</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordtype">float</span> timeout = 5.0; <span class="comment">// seconds</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordtype">double</span> timer = -1.;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="comment">// just to test timer</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">//COSMOS_SLEEP(0.001);</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">while</span> ( (recv_len &lt; 0) &amp;&amp; (timer &lt; timeout) ){</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="comment">// keep trying to receive message</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="comment">//receivedStatus = udp.receiveOnce();</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;        <span class="comment">//try to receive some data</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        recv_len = recvfrom(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>,</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                            buf,</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                            <a class="code" href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a>,</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                            0,</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                            (<span class="keyword">struct</span> sockaddr *) &amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a63c52bef921eae21fdf1e9ae0a674718">s_other</a>,</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                            (socklen_t *)&amp;<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">addrlen</a>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        timer = ep.<a class="code" href="class_elapsed_time.html#ad692976e807c3969ca0cda97be527977">toc</a>();</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="comment">//std::cout &lt;&lt; recv_len &lt;&lt; &quot; | &quot; &lt;&lt; timer &lt;&lt; std::endl;</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <span class="comment">//std::cout &lt;&lt; &quot; (udp rx: &quot; &lt;&lt; recv_len &lt;&lt; &quot; bytes | &quot; &lt;&lt; timer &lt;&lt; &quot; sec)&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        <span class="keywordflow">if</span> (recv_len &lt; 0)</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            <span class="keywordflow">if</span> (WSAGetLastError() == 10035){</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                <span class="comment">//std::cout &lt;&lt; &quot;Resource temporarily unavailable. Continue.&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">errorStatus</a>(<span class="stringliteral">&quot;Udp::receiveOnce&quot;</span>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <span class="comment">//continue;</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keywordflow">if</span> (recv_len &gt; 0) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            <span class="comment">//print details of the client/peer and the data received</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="comment">//        std::cout &lt;&lt; &quot;Received packet from &quot; &lt;&lt; inet_ntoa(sok.server.sin_addr) &lt;&lt; &quot;:&quot; &lt;&lt; ntohs(sok.port) &lt;&lt; std::endl;</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            <span class="comment">//        std::cout &lt;&lt; &quot;Data: &quot; &lt;&lt; buf &lt;&lt; std::endl;</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="comment">//std::cout &lt;&lt; std::endl &lt;&lt; &quot;&lt;&lt; udp rx: &quot; &lt;&lt; recv_len &lt;&lt; &quot; bytes | &quot; &lt;&lt; std::setprecision(3) &lt;&lt; std::fixed &lt;&lt; timer &lt;&lt; &quot; sec&quot; &lt;&lt; std::endl;</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            recv_len = 0;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            timer = 0;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;            <a class="code" href="class_udp.html#a66de1c36d4371219976ed62931d9ed4f">receivedData</a> = string(buf);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to receive data in less than 5 sec. Elapsed time: &quot;</span> &lt;&lt; ep.<a class="code" href="class_elapsed_time.html#ad692976e807c3969ca0cda97be527977">toc</a>() &lt;&lt; std::endl;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;}</div><div class="ttc" id="class_udp_html_aae37e6536baa48cf24b8a3e3bd7e1a62"><div class="ttname"><a href="class_udp.html#aae37e6536baa48cf24b8a3e3bd7e1a62">Udp::errorStatus</a></div><div class="ttdeci">int32_t errorStatus(string functionName)</div><div class="ttdef"><b>Definition:</b> socketlib.cpp:1075</div></div>
<div class="ttc" id="struct_socket_options_html_ac9e86d0d9c88009fff1297e380e88c33"><div class="ttname"><a href="struct_socket_options.html#ac9e86d0d9c88009fff1297e380e88c33">SocketOptions::addrlen</a></div><div class="ttdeci">int addrlen</div><div class="ttdef"><b>Definition:</b> socketlib.h:181</div></div>
<div class="ttc" id="struct_socket_options_html_a81e31ac679b00160c4e59a5889925d72"><div class="ttname"><a href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">SocketOptions::handle</a></div><div class="ttdeci">int32_t handle</div><div class="ttdef"><b>Definition:</b> socketlib.h:168</div></div>
<div class="ttc" id="class_elapsed_time_html_ab373e7766d7a55f758c6e85944ad4f5b"><div class="ttname"><a href="class_elapsed_time.html#ab373e7766d7a55f758c6e85944ad4f5b">ElapsedTime::print</a></div><div class="ttdeci">bool print</div><div class="ttdef"><b>Definition:</b> elapsedtime.h:97</div></div>
<div class="ttc" id="class_elapsed_time_html_a70ac672f907da6ec1c3cc8c1a9a1a9ca"><div class="ttname"><a href="class_elapsed_time.html#a70ac672f907da6ec1c3cc8c1a9a1a9ca">ElapsedTime::tic</a></div><div class="ttdeci">void tic()</div><div class="ttdoc">ElapsedTime::tic, equivalent to matlab to start a stopwatch timer. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:166</div></div>
<div class="ttc" id="class_elapsed_time_html"><div class="ttname"><a href="class_elapsed_time.html">ElapsedTime</a></div><div class="ttdef"><b>Definition:</b> elapsedtime.h:62</div></div>
<div class="ttc" id="struct_socket_options_html_a63c52bef921eae21fdf1e9ae0a674718"><div class="ttname"><a href="struct_socket_options.html#a63c52bef921eae21fdf1e9ae0a674718">SocketOptions::s_other</a></div><div class="ttdeci">struct sockaddr_in s_other</div><div class="ttdef"><b>Definition:</b> socketlib.h:171</div></div>
<div class="ttc" id="class_elapsed_time_html_ad692976e807c3969ca0cda97be527977"><div class="ttname"><a href="class_elapsed_time.html#ad692976e807c3969ca0cda97be527977">ElapsedTime::toc</a></div><div class="ttdeci">double toc()</div><div class="ttdoc">ElapsedTime::toc, equivalent to matlab to stop a stopwatch timer. </div><div class="ttdef"><b>Definition:</b> elapsedtime.cpp:174</div></div>
<div class="ttc" id="rw__test_8cpp_html_aaf89e0814a79d60c1a986f07766a4f85"><div class="ttname"><a href="rw__test_8cpp.html#aaf89e0814a79d60c1a986f07766a4f85">buf</a></div><div class="ttdeci">char buf[128]</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:40</div></div>
<div class="ttc" id="group__socketlib__constants_html_ga0697298480c6dfd831c7d3df35d7e37d"><div class="ttname"><a href="group__socketlib__constants.html#ga0697298480c6dfd831c7d3df35d7e37d">SOCKET_BUFFER_LENGTH</a></div><div class="ttdeci">#define SOCKET_BUFFER_LENGTH</div><div class="ttdef"><b>Definition:</b> socketlib.h:105</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
<div class="ttc" id="class_udp_html_a66de1c36d4371219976ed62931d9ed4f"><div class="ttname"><a href="class_udp.html#a66de1c36d4371219976ed62931d9ed4f">Udp::receivedData</a></div><div class="ttdeci">string receivedData</div><div class="ttdef"><b>Definition:</b> socketlib.h:248</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef05f12c31fdb54106fc9e3f70c582a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                  {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="preprocessor">#ifdef COSMOS_WIN_OS</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    closesocket(<a class="code" href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">sok</a>.<a class="code" href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">handle</a>);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    WSACleanup();</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;}</div><div class="ttc" id="struct_socket_options_html_a81e31ac679b00160c4e59a5889925d72"><div class="ttname"><a href="struct_socket_options.html#a81e31ac679b00160c4e59a5889925d72">SocketOptions::handle</a></div><div class="ttdeci">int32_t handle</div><div class="ttdef"><b>Definition:</b> socketlib.h:168</div></div>
<div class="ttc" id="class_udp_html_abbeae23445bf7ff06f49face5c42efcf"><div class="ttname"><a href="class_udp.html#abbeae23445bf7ff06f49face5c42efcf">Udp::sok</a></div><div class="ttdeci">SocketOptions sok</div><div class="ttdef"><b>Definition:</b> socketlib.h:213</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="abbeae23445bf7ff06f49face5c42efcf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_socket_options.html">SocketOptions</a> Udp::sok</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa97996e9b06a6988727954499ad0dfd1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Udp::iretn = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a66de1c36d4371219976ed62931d9ed4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string Udp::receivedData</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="socketlib_8h_source.html">socketlib.h</a></li>
<li><a class="el" href="socketlib_8cpp.html">socketlib.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_udp.html">Udp</a></li>
    <li class="footer">Generated on Sun Oct 4 2020 00:17:40 for COSMOS core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
