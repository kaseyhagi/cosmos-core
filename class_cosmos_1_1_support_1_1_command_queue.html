<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>COSMOS core: Cosmos::Support::CommandQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo80.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">COSMOS core
   &#160;<span id="projectnumber">1.0.2 (beta)</span>
   </div>
   <div id="projectbrief">Comprehensive Open-architecture Solution for Mission Operations Systems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_cosmos_1_1_support_1_1_command_queue.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_cosmos_1_1_support_1_1_command_queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Cosmos::Support::CommandQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to manage information about a queue of Events.  
 <a href="class_cosmos_1_1_support_1_1_command_queue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="command__queue_8h_source.html">command_queue.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Cosmos::Support::CommandQueue:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_cosmos_1_1_support_1_1_command_queue__coll__graph.svg" width="203" height="492"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a64aefd5e5df6dff193ebe8cf865e8647"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a64aefd5e5df6dff193ebe8cf865e8647">~CommandQueue</a> ()</td></tr>
<tr class="memdesc:a64aefd5e5df6dff193ebe8cf865e8647"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure all threads are joined before destruction.  <a href="#a64aefd5e5df6dff193ebe8cf865e8647">More...</a><br /></td></tr>
<tr class="separator:a64aefd5e5df6dff193ebe8cf865e8647"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a566b4ab42b0d31a2bd325ba76aed3708"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a566b4ab42b0d31a2bd325ba76aed3708">join_event_threads</a> ()</td></tr>
<tr class="memdesc:a566b4ab42b0d31a2bd325ba76aed3708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Join all threads spawn and empty our vector.  <a href="#a566b4ab42b0d31a2bd325ba76aed3708">More...</a><br /></td></tr>
<tr class="separator:a566b4ab42b0d31a2bd325ba76aed3708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea483abdafc301cc5e8d065efe688b54"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#aea483abdafc301cc5e8d065efe688b54">get_event_size</a> ()</td></tr>
<tr class="memdesc:aea483abdafc301cc5e8d065efe688b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the size of the queue.  <a href="#aea483abdafc301cc5e8d065efe688b54">More...</a><br /></td></tr>
<tr class="separator:aea483abdafc301cc5e8d065efe688b54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca45e90cb48c7b3210150c0e4edaec4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a7ca45e90cb48c7b3210150c0e4edaec4">get_event</a> (int <a class="el" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaa85ae20979fb729ef19da67855aecdfd5">i</a>)</td></tr>
<tr class="memdesc:a7ca45e90cb48c7b3210150c0e4edaec4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> by its position in the queue.  <a href="#a7ca45e90cb48c7b3210150c0e4edaec4">More...</a><br /></td></tr>
<tr class="separator:a7ca45e90cb48c7b3210150c0e4edaec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02f10f7913bbaf53431ee4658eb4a450"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a02f10f7913bbaf53431ee4658eb4a450">get_command_size</a> ()</td></tr>
<tr class="memdesc:a02f10f7913bbaf53431ee4658eb4a450"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the size of the queue.  <a href="#a02f10f7913bbaf53431ee4658eb4a450">More...</a><br /></td></tr>
<tr class="separator:a02f10f7913bbaf53431ee4658eb4a450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafc4f5d5ce6717ec405e7899fefcc54e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#aafc4f5d5ce6717ec405e7899fefcc54e">get_command</a> (int <a class="el" href="eci2kep__test_8cpp.html#aa94081298ab2dfd0f261cce6c203d9aaa85ae20979fb729ef19da67855aecdfd5">i</a>)</td></tr>
<tr class="memdesc:aafc4f5d5ce6717ec405e7899fefcc54e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> by its position in the queue.  <a href="#aafc4f5d5ce6717ec405e7899fefcc54e">More...</a><br /></td></tr>
<tr class="separator:aafc4f5d5ce6717ec405e7899fefcc54e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a52ec7681dd91da0393e07233b88e98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a4a52ec7681dd91da0393e07233b88e98">load_commands</a> (string <a class="el" href="agent__monitor_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a>)</td></tr>
<tr class="memdesc:a4a52ec7681dd91da0393e07233b88e98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load queue of Events from a file.  <a href="#a4a52ec7681dd91da0393e07233b88e98">More...</a><br /></td></tr>
<tr class="separator:a4a52ec7681dd91da0393e07233b88e98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e0d5c6b244ada7b4fff5d6e48c59901"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a8e0d5c6b244ada7b4fff5d6e48c59901">save_commands</a> (string <a class="el" href="agent__monitor_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a>)</td></tr>
<tr class="memdesc:a8e0d5c6b244ada7b4fff5d6e48c59901"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the queue of Events to a file.  <a href="#a8e0d5c6b244ada7b4fff5d6e48c59901">More...</a><br /></td></tr>
<tr class="separator:a8e0d5c6b244ada7b4fff5d6e48c59901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c91f91ef56306f408fa379d2d7e261"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a80c91f91ef56306f408fa379d2d7e261">run_command</a> (<a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;cmd, string <a class="el" href="get__contacts_8cpp.html#a20e7ee18d1753fd7550a2b6decc45384">nodename</a>, double <a class="el" href="agent__monitor_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>)</td></tr>
<tr class="memdesc:a80c91f91ef56306f408fa379d2d7e261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a>.  <a href="#a80c91f91ef56306f408fa379d2d7e261">More...</a><br /></td></tr>
<tr class="separator:a80c91f91ef56306f408fa379d2d7e261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5ab7fb21b6d1e099a5d693e2b8e881"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a0a5ab7fb21b6d1e099a5d693e2b8e881">flush_commands</a> ()</td></tr>
<tr class="memdesc:a0a5ab7fb21b6d1e099a5d693e2b8e881"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traverse the entire queue of Events, clearing those that have finished.  <a href="#a0a5ab7fb21b6d1e099a5d693e2b8e881">More...</a><br /></td></tr>
<tr class="separator:a0a5ab7fb21b6d1e099a5d693e2b8e881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1f53c61787e536d17ce6d44674eaad8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#ae1f53c61787e536d17ce6d44674eaad8">run_commands</a> (<a class="el" href="class_cosmos_1_1_support_1_1_agent.html">Agent</a> *<a class="el" href="udp__listen_8cpp.html#a33f057efc5b568f7255a73d2570c426a">agent</a>, string <a class="el" href="get__contacts_8cpp.html#a20e7ee18d1753fd7550a2b6decc45384">nodename</a>, double <a class="el" href="agent__monitor_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>)</td></tr>
<tr class="memdesc:ae1f53c61787e536d17ce6d44674eaad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traverse the entire queue of Events, and run those which qualify.  <a href="#ae1f53c61787e536d17ce6d44674eaad8">More...</a><br /></td></tr>
<tr class="separator:ae1f53c61787e536d17ce6d44674eaad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0eaee928fcfdb4d6a6d552b31c17b63"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#af0eaee928fcfdb4d6a6d552b31c17b63">add_command</a> (<a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;c)</td></tr>
<tr class="memdesc:af0eaee928fcfdb4d6a6d552b31c17b63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove <b>all</b> matching <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue.  <a href="#af0eaee928fcfdb4d6a6d552b31c17b63">More...</a><br /></td></tr>
<tr class="separator:af0eaee928fcfdb4d6a6d552b31c17b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a9c4eb7509626e6b686e6240b392d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a13a9c4eb7509626e6b686e6240b392d9">del_command</a> (<a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;c)</td></tr>
<tr class="memdesc:a13a9c4eb7509626e6b686e6240b392d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove <b>all</b> matching <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue.  <a href="#a13a9c4eb7509626e6b686e6240b392d9">More...</a><br /></td></tr>
<tr class="separator:a13a9c4eb7509626e6b686e6240b392d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab806362559d8d802dd8820b6b218098"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#aab806362559d8d802dd8820b6b218098">del_command</a> (int pos)</td></tr>
<tr class="memdesc:aab806362559d8d802dd8820b6b218098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue based on position.  <a href="#aab806362559d8d802dd8820b6b218098">More...</a><br /></td></tr>
<tr class="separator:aab806362559d8d802dd8820b6b218098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2acbc7ef73691a12e7cda7bfbea80c26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a2acbc7ef73691a12e7cda7bfbea80c26">sort</a> ()</td></tr>
<tr class="memdesc:a2acbc7ef73691a12e7cda7bfbea80c26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort the Events in the queue by <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> exectution time.  <a href="#a2acbc7ef73691a12e7cda7bfbea80c26">More...</a><br /></td></tr>
<tr class="separator:a2acbc7ef73691a12e7cda7bfbea80c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3741b27ac40bcb1e1ee5ece3b4b642dd"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="class_cosmos_1_1_event.html">Event</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a></td></tr>
<tr class="separator:a3741b27ac40bcb1e1ee5ece3b4b642dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269cd1ec70c4e4c8c61d7f05b17a5b40"><td class="memItemLeft" align="right" valign="top">std::deque&lt; <a class="el" href="class_cosmos_1_1_event.html">Event</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a></td></tr>
<tr class="separator:a269cd1ec70c4e4c8c61d7f05b17a5b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac998b8f0167f6eb5370672f6687a3a0a"><td class="memItemLeft" align="right" valign="top">vector&lt; std::thread &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a></td></tr>
<tr class="separator:ac998b8f0167f6eb5370672f6687a3a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3576d5ed46fb8cd4c3bea2e7aa0b976c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">queue_changed</a> = false</td></tr>
<tr class="separator:a3576d5ed46fb8cd4c3bea2e7aa0b976c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0837094e64fc912c254b71ff5fb4f6a9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#a0837094e64fc912c254b71ff5fb4f6a9">queue_blocked</a> = false</td></tr>
<tr class="separator:a0837094e64fc912c254b71ff5fb4f6a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ae0d60e38f0f82cff185f381857cb76bd"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html#ae0d60e38f0f82cff185f381857cb76bd">operator&lt;&lt;</a> (std::ostream &amp;out, <a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html">CommandQueue</a> &amp;cmdq)</td></tr>
<tr class="memdesc:ae0d60e38f0f82cff185f381857cb76bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extraction operator.  <a href="#ae0d60e38f0f82cff185f381857cb76bd">More...</a><br /></td></tr>
<tr class="separator:ae0d60e38f0f82cff185f381857cb76bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to manage information about a queue of Events. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a64aefd5e5df6dff193ebe8cf865e8647"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cosmos::Support::CommandQueue::~CommandQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ensure all threads are joined before destruction. </p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{ <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a566b4ab42b0d31a2bd325ba76aed3708">join_event_threads</a>(); }</div><div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a566b4ab42b0d31a2bd325ba76aed3708"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a566b4ab42b0d31a2bd325ba76aed3708">Cosmos::Support::CommandQueue::join_event_threads</a></div><div class="ttdeci">size_t join_event_threads()</div><div class="ttdoc">Join all threads spawn and empty our vector. </div><div class="ttdef"><b>Definition:</b> command_queue.cpp:115</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a566b4ab42b0d31a2bd325ba76aed3708"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t Cosmos::Support::CommandQueue::join_event_threads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Join all threads spawn and empty our vector. </p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">//            static auto join_event = [] (std::thread &amp;t) {</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">//                t.join();</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">//            };</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">//            std::for_each(event_threads.begin(), event_threads.end(), join_event);</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//            event_threads.clear();</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordtype">size_t</span> <a class="code" href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = 0;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keywordflow">for</span>(uint16_t <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>.size(); ++<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].joinable())</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>[<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>].join();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    ++<a class="code" href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordflow">if</span> (count == <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>.size())</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>.clear();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>.size();</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div><div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="rw__test_8cpp_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="rw__test_8cpp.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:36</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_ac998b8f0167f6eb5370672f6687a3a0a"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">Cosmos::Support::CommandQueue::event_threads</a></div><div class="ttdeci">vector&lt; std::thread &gt; event_threads</div><div class="ttdef"><b>Definition:</b> command_queue.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea483abdafc301cc5e8d065efe688b54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Cosmos::Support::CommandQueue::get_event_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the size of the queue. </p>
<dl class="section return"><dt>Returns</dt><dd>The size of the queue </dd></dl>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.size(); }</div><div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a269cd1ec70c4e4c8c61d7f05b17a5b40"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">Cosmos::Support::CommandQueue::events</a></div><div class="ttdeci">std::deque&lt; Event &gt; events</div><div class="ttdef"><b>Definition:</b> command_queue.h:63</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ca45e90cb48c7b3210150c0e4edaec4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cosmos_1_1_event.html">Event</a>&amp; Cosmos::Support::CommandQueue::get_event </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve an <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> by its position in the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Integer representing the position in the queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to the ith <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                std::deque&lt;Event&gt;::iterator ii = <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.begin();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                std::advance(ii,<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">return</span> *ii;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            }</div><div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a269cd1ec70c4e4c8c61d7f05b17a5b40"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">Cosmos::Support::CommandQueue::events</a></div><div class="ttdeci">std::deque&lt; Event &gt; events</div><div class="ttdef"><b>Definition:</b> command_queue.h:63</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a02f10f7913bbaf53431ee4658eb4a450"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Cosmos::Support::CommandQueue::get_command_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the size of the queue. </p>
<dl class="section return"><dt>Returns</dt><dd>The size of the queue </dd></dl>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.size(); }</div><div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aafc4f5d5ce6717ec405e7899fefcc54e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_cosmos_1_1_event.html">Event</a>&amp; Cosmos::Support::CommandQueue::get_command </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve an <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> by its position in the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>Integer representing the position in the queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to the ith <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                std::list&lt;Event&gt;::iterator ii = <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.begin();</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                std::advance(ii,<a class="code" href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">return</span> *ii;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            }</div><div class="ttc" id="rw__test_8cpp_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="rw__test_8cpp.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> rw_test.cpp:37</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4a52ec7681dd91da0393e07233b88e98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Support::CommandQueue::load_commands </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>incoming_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load queue of Events from a file. </p>
<p>Loads new commands from *.command files located in the incoming directory.</p>
<p>Reads new Events from *.command files in the incoming directory, adds them to the queue of Events, and deletes the *.command files. Events in the queue are then sorted by their execution time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">incoming_dir</td><td>Directory where the .queue file will be read from</td></tr>
  </table>
  </dd>
</dl>
<p>Commands are loaded into the global <a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html" title="Class to manage information about a queue of Events. ">CommandQueue</a> object (cmd_queue), .command files are removed, and the command list is sorted by utc. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">incoming_dir</td><td>Directory where the .command files will be read from </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <a class="code" href="struct_d_i_r.html">DIR</a> *dir = NULL;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keyword">struct </span><a class="code" href="structdirent.html">dirent</a> *dir_entry = NULL;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="comment">// open the incoming directory</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keywordflow">if</span> ((dir = <a class="code" href="dirent_8c.html#a1632d8c06c14f295c6d9407b7fec67af">opendir</a>((<span class="keywordtype">char</span> *)<a class="code" href="agent__monitor_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a>.c_str())) == NULL)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                std::cout&lt;&lt;<span class="stringliteral">&quot;error: unable to open node&#39;s incoming directory &lt;&quot;</span>&lt;&lt;<a class="code" href="agent__monitor_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a>&lt;&lt;<span class="stringliteral">&quot;&gt; not found&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="comment">// cycle through all the file names in the incoming directory</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">while</span>((dir_entry = <a class="code" href="dirent_8c.html#ae4d263c5a1d3825c9511a898762513b2">readdir</a>(dir)) != NULL)</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="keywordtype">string</span> filename = dir_entry-&gt;<a class="code" href="structdirent.html#ab703007dd91aa1f311cf0fc85268b2e1">d_name</a>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                <span class="keywordflow">if</span> (filename.find(<span class="stringliteral">&quot;.command&quot;</span>) != string::npos)</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                    <span class="keywordtype">string</span> infilepath = <a class="code" href="agent__monitor_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a> + filename;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                    std::ifstream infile(infilepath.c_str());</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    <span class="keywordflow">if</span>(!infile.is_open())</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                    {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        std::cout&lt;&lt;<span class="stringliteral">&quot;unable to read file &lt;&quot;</span>&lt;&lt;infilepath&lt;&lt;<span class="stringliteral">&quot;&gt;&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    <span class="comment">//file is open for reading commands</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    <span class="keywordtype">string</span> line;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    <a class="code" href="class_cosmos_1_1_event.html">Event</a> cmd;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                    <span class="keywordflow">while</span>(getline(infile,line))</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                    {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                        cmd.<a class="code" href="class_cosmos_1_1_event.html#ad71a7fffaef8b47a90e66c68fd01f75e">set_command</a>(line);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                        std::cout &lt;&lt; <span class="stringliteral">&quot;Command added: &quot;</span> &lt;&lt; cmd;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        <span class="keywordflow">if</span>(cmd.is_command())</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#af0eaee928fcfdb4d6a6d552b31c17b63">add_command</a>(cmd);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                            std::cout&lt;&lt;<span class="stringliteral">&quot;Not a command!&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                    }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                    infile.close();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    <span class="comment">//remove the .command file from incoming directory</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                    <span class="keywordflow">if</span>(<span class="keyword">remove</span>(infilepath.c_str()))  {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                        std::cout&lt;&lt;<span class="stringliteral">&quot;unable to delete file &lt;&quot;</span>&lt;&lt;filename&lt;&lt;<span class="stringliteral">&quot;&gt;&quot;</span>&lt;&lt;std::endl;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    std::cout&lt;&lt;<span class="stringliteral">&quot;\nThe size of the command queue is: &quot;</span>&lt;&lt; <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a02f10f7913bbaf53431ee4658eb4a450">get_command_size</a>()&lt;&lt;std::endl;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a2acbc7ef73691a12e7cda7bfbea80c26">sort</a>();</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <a class="code" href="dirent_8c.html#ac0258906f9453b8abf03e945aa9c9676">closedir</a>(dir);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div><div class="ttc" id="class_cosmos_1_1_event_html"><div class="ttname"><a href="class_cosmos_1_1_event.html">Cosmos::Event</a></div><div class="ttdoc">Class to manage Event information. </div><div class="ttdef"><b>Definition:</b> event.h:58</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a2acbc7ef73691a12e7cda7bfbea80c26"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a2acbc7ef73691a12e7cda7bfbea80c26">Cosmos::Support::CommandQueue::sort</a></div><div class="ttdeci">void sort()</div><div class="ttdoc">Sort the Events in the queue by Event exectution time. </div><div class="ttdef"><b>Definition:</b> command_queue.h:202</div></div>
<div class="ttc" id="dirent_8c_html_ac0258906f9453b8abf03e945aa9c9676"><div class="ttname"><a href="dirent_8c.html#ac0258906f9453b8abf03e945aa9c9676">closedir</a></div><div class="ttdeci">int closedir(DIR *dir)</div><div class="ttdef"><b>Definition:</b> dirent.c:74</div></div>
<div class="ttc" id="struct_d_i_r_html"><div class="ttname"><a href="struct_d_i_r.html">DIR</a></div><div class="ttdef"><b>Definition:</b> dirent.c:24</div></div>
<div class="ttc" id="structdirent_html"><div class="ttname"><a href="structdirent.html">dirent</a></div><div class="ttdef"><b>Definition:</b> dirent.h:21</div></div>
<div class="ttc" id="dirent_8c_html_a1632d8c06c14f295c6d9407b7fec67af"><div class="ttname"><a href="dirent_8c.html#a1632d8c06c14f295c6d9407b7fec67af">opendir</a></div><div class="ttdeci">DIR * opendir(const char *name)</div><div class="ttdef"><b>Definition:</b> dirent.c:32</div></div>
<div class="ttc" id="dirent_8c_html_ae4d263c5a1d3825c9511a898762513b2"><div class="ttname"><a href="dirent_8c.html#ae4d263c5a1d3825c9511a898762513b2">readdir</a></div><div class="ttdeci">struct dirent * readdir(DIR *dir)</div><div class="ttdef"><b>Definition:</b> dirent.c:97</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_ad71a7fffaef8b47a90e66c68fd01f75e"><div class="ttname"><a href="class_cosmos_1_1_event.html#ad71a7fffaef8b47a90e66c68fd01f75e">Cosmos::Event::set_command</a></div><div class="ttdeci">void set_command(string jstring)</div><div class="ttdoc">Sets Event information from a JSON formatted string. </div><div class="ttdef"><b>Definition:</b> event.cpp:118</div></div>
<div class="ttc" id="structdirent_html_ab703007dd91aa1f311cf0fc85268b2e1"><div class="ttname"><a href="structdirent.html#ab703007dd91aa1f311cf0fc85268b2e1">dirent::d_name</a></div><div class="ttdeci">char * d_name</div><div class="ttdef"><b>Definition:</b> dirent.h:23</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a02f10f7913bbaf53431ee4658eb4a450"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a02f10f7913bbaf53431ee4658eb4a450">Cosmos::Support::CommandQueue::get_command_size</a></div><div class="ttdeci">size_t get_command_size()</div><div class="ttdoc">Retrieve the size of the queue. </div><div class="ttdef"><b>Definition:</b> command_queue.h:100</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_af0eaee928fcfdb4d6a6d552b31c17b63"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#af0eaee928fcfdb4d6a6d552b31c17b63">Cosmos::Support::CommandQueue::add_command</a></div><div class="ttdeci">void add_command(Event &amp;c)</div><div class="ttdoc">Remove all matching Event from the queue. </div><div class="ttdef"><b>Definition:</b> command_queue.cpp:489</div></div>
<div class="ttc" id="agent__monitor_8cpp_html_ae8daa3beef6b216ff37a2e24e65931fe"><div class="ttname"><a href="agent__monitor_8cpp.html#ae8daa3beef6b216ff37a2e24e65931fe">incoming_dir</a></div><div class="ttdeci">static string incoming_dir</div><div class="ttdef"><b>Definition:</b> agent_monitor.cpp:76</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8e0d5c6b244ada7b4fff5d6e48c59901"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Support::CommandQueue::save_commands </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>temp_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the queue of Events to a file. </p>
<p>Save the queue of Events to the file temp_dir/.queue </p><pre class="fragment">\param  temp_dir    Directory where the .queue file will be written</pre><p>Commands are taken from the global command queue <a class="el" href="namespace_cosmos_1_1_support_1_1_command.html">Command</a> queue is sorted by utc after loading</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">temp_dir</td><td>Directory where the .queue file will be written </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">queue_changed</a>)</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">queue_changed</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="comment">// Save previous queue</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            rename((<a class="code" href="agent__monitor_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a>+<span class="stringliteral">&quot;.queue&quot;</span>).c_str(), (<a class="code" href="agent__monitor_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a>+<span class="stringliteral">&quot;.queue.&quot;</span>+(<a class="code" href="group__timelib__functions.html#ga808cc514039445032d5f4d87605e9fcb">utc2unixdate</a>(<a class="code" href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a>()))).c_str());</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="comment">// Open the outgoing file</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            FILE *<a class="code" href="arduino__lib_8cpp.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = fopen((<a class="code" href="agent__monitor_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a>+<span class="stringliteral">&quot;.queue&quot;</span>).c_str(), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span> (fd != NULL)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="class_cosmos_1_1_event.html">Event</a> cmd: <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>)</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    fprintf(fd, <span class="stringliteral">&quot;%s\n&quot;</span>, cmd.get_event_string().c_str());</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                fclose(fd);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div><div class="ttc" id="agent__monitor_8cpp_html_a093e759fd14e5caa2d86e56009ebd011"><div class="ttname"><a href="agent__monitor_8cpp.html#a093e759fd14e5caa2d86e56009ebd011">temp_dir</a></div><div class="ttdeci">static string temp_dir</div><div class="ttdef"><b>Definition:</b> agent_monitor.cpp:78</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html"><div class="ttname"><a href="class_cosmos_1_1_event.html">Cosmos::Event</a></div><div class="ttdoc">Class to manage Event information. </div><div class="ttdef"><b>Definition:</b> event.h:58</div></div>
<div class="ttc" id="arduino__lib_8cpp_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="arduino__lib_8cpp.html#a6f8059414f0228f0256115e024eeed4b">fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> arduino_lib.cpp:61</div></div>
<div class="ttc" id="group__timelib__functions_html_ga808cc514039445032d5f4d87605e9fcb"><div class="ttname"><a href="group__timelib__functions.html#ga808cc514039445032d5f4d87605e9fcb">utc2unixdate</a></div><div class="ttdeci">string utc2unixdate(double utc)</div><div class="ttdoc">Time for setting unix date. </div><div class="ttdef"><b>Definition:</b> timelib.cpp:1260</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3576d5ed46fb8cd4c3bea2e7aa0b976c"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">Cosmos::Support::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:67</div></div>
<div class="ttc" id="group__timelib__functions_html_ga39f0682a60fce7940363aad40ad4a244"><div class="ttname"><a href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a></div><div class="ttdeci">double currentmjd(double offset)</div><div class="ttdoc">Current UTC in Modified Julian Days. </div><div class="ttdef"><b>Definition:</b> timelib.cpp:65</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80c91f91ef56306f408fa379d2d7e261"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Support::CommandQueue::run_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>node_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>logdate_exec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a>. </p>
<p>Execute an event using ford(). For each event run, the time of execution (utcexec) is set, the flag EVENT_FLAG_ACTUAL is set to true, and this updated command information is logged to the OUTPUT directory. </p><pre class="fragment">\param  cmd Reference to event to run
\param  nodename    Name of node
\param  logdate_exec    Time of execution (for logging purposes)</pre><p>Executes a command in a separate shell (system) using threads. For each command run, the time of execution (utcexec) is set, the flag EVENT_FLAG_ACTUAL is set to true, and this updated command information is logged to the OUTPUT directory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>Reference to event to run </td></tr>
    <tr><td class="paramname">nodename</td><td>Name of node </td></tr>
    <tr><td class="paramname">logdate_exec</td><td>Time of execution (for logging purposes) </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">queue_changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">// set time executed &amp; actual flag</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            cmd.<a class="code" href="class_cosmos_1_1_event.html#ab7f0502ef916a950ec3b2d8f0c6b1a3e">set_utcexec</a>();</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            cmd.<a class="code" href="class_cosmos_1_1_event.html#a8bf3c30576db73ae0cbfa1f03e4cca1f">set_actual</a>();</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordtype">string</span> outpath = <a class="code" href="group__datalib__functions.html#gade4d81e56aef2cda654079f687269673">data_type_path</a>(<a class="code" href="propagator__simple_8cpp.html#a65a2d27d476efcf99f7bbd35388ff02e">node_name</a>, <span class="stringliteral">&quot;temp&quot;</span>, <span class="stringliteral">&quot;exec&quot;</span>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>, <span class="stringliteral">&quot;out&quot;</span>);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordtype">char</span> command_line[100];</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            strcpy(command_line, cmd.<a class="code" href="class_cosmos_1_1_event.html#a9cedca544fafdb198ea00ab83a642fb0">get_data</a>().c_str());</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="comment">// We keep track of all threads spawned to join before moving log files.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>.push_back(std::thread([=] () {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <span class="keywordtype">int</span> devn, prev_stdin, prev_stdout, prev_stderr;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <span class="keywordflow">if</span> (outpath.empty()) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    devn = open(<span class="stringliteral">&quot;/dev/null&quot;</span>, O_RDWR);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    devn = open(outpath.c_str(), O_CREAT|O_WRONLY|O_APPEND, 00666);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                prev_stdin = dup(STDIN_FILENO);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                prev_stdout = dup(STDOUT_FILENO);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                prev_stderr = dup(STDERR_FILENO);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="comment">// Redirect all output our executed command.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                dup2(devn, STDIN_FILENO);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                dup2(devn, STDOUT_FILENO);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                dup2(devn, STDERR_FILENO);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                close(devn);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="comment">// Execute the command.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                system(command_line);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                dup2(prev_stdin, STDIN_FILENO);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                dup2(prev_stdout, STDOUT_FILENO);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                dup2(prev_stderr, STDERR_FILENO);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                close(prev_stdin);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                close(prev_stdout);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                close(prev_stderr);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            }));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="comment">//#if defined(COSMOS_WIN_OS)</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="comment">//  char command_line[100];</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="comment">//    strcpy(command_line, cmd.get_data().c_str());</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="comment">//  STARTUPINFOA si;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="comment">//  PROCESS_INFORMATION pi;</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="comment">//  ZeroMemory( &amp;si, sizeof(si) );</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="comment">//  si.cb = sizeof(si);</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="comment">//  ZeroMemory( &amp;pi, sizeof(pi) );</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="comment">//  if (CreateProcessA(NULL, (LPSTR) command_line, NULL, NULL, FALSE, 0, NULL, NULL, &amp;si, &amp;pi))</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">//  {</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="comment">//      //      int32_t pid = pi.dwProcessId;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="comment">//      CloseHandle( pi.hProcess );</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="comment">//      CloseHandle( pi.hThread );</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">//  }</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="comment">//#else</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="comment">//    int32_t pid = fork(); // Fork paradigm copies ENTIRE process space, leads to errors when exiting child. Now using threads.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="comment">//    char *words[MAXCOMMANDWORD];</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="comment">//    string_parse((char *)cmd.get_data().c_str(), words, MAXCOMMANDWORD);</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="comment">//    string outpath = data_type_path(node_name, &quot;temp&quot;, &quot;exec&quot;, logdate_exec, &quot;out&quot;);</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="comment">//    if (pid != 0) {</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="comment">//        signal(SIGCHLD, SIG_IGN); // Ensure no zombies.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="comment">//    }</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">//    else {</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="comment">//        int devn;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="comment">//        if (outpath.empty()) {</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="comment">//            devn = open(&quot;/dev/null&quot;,O_RDWR);</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="comment">//        }</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="comment">//        else {</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="comment">//            devn = open(outpath.c_str(), O_CREAT|O_WRONLY|O_APPEND, 00666);</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="comment">//        }</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="comment">//      dup2(devn, STDIN_FILENO);</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">//      dup2(devn, STDOUT_FILENO);</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="comment">//      dup2(devn, STDERR_FILENO);</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="comment">//      close(devn);</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="comment">//        // Execute the command.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">//        execvp(words[0], &amp;(words[1]));</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="comment">//        fflush(stdout);</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="comment">//        exit (0);</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="comment">//    }</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment">//#endif</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="comment">// log to event file</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="group__datalib__functions.html#ga5c64b9eafbfadb9af58898a35764e7ed">log_write</a>(<a class="code" href="propagator__simple_8cpp.html#a65a2d27d476efcf99f7bbd35388ff02e">node_name</a>, <span class="stringliteral">&quot;exec&quot;</span>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>, <span class="stringliteral">&quot;event&quot;</span>, cmd.<a class="code" href="class_cosmos_1_1_event.html#ada0ebe2941daa3218decd42f57f7db91">get_event_string</a>().c_str());</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        }</div><div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_ac998b8f0167f6eb5370672f6687a3a0a"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">Cosmos::Support::CommandQueue::event_threads</a></div><div class="ttdeci">vector&lt; std::thread &gt; event_threads</div><div class="ttdef"><b>Definition:</b> command_queue.h:65</div></div>
<div class="ttc" id="group__datalib__functions_html_gade4d81e56aef2cda654079f687269673"><div class="ttname"><a href="group__datalib__functions.html#gade4d81e56aef2cda654079f687269673">data_type_path</a></div><div class="ttdeci">string data_type_path(string node, string location, string agent, double mjd, string type)</div><div class="ttdoc">Create data file path. </div><div class="ttdef"><b>Definition:</b> datalib.cpp:910</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_ada0ebe2941daa3218decd42f57f7db91"><div class="ttname"><a href="class_cosmos_1_1_event.html#ada0ebe2941daa3218decd42f57f7db91">Cosmos::Event::get_event_string</a></div><div class="ttdeci">string get_event_string()</div><div class="ttdoc">Retrieves Event information. </div><div class="ttdef"><b>Definition:</b> event.cpp:138</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3576d5ed46fb8cd4c3bea2e7aa0b976c"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">Cosmos::Support::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:67</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_ab7f0502ef916a950ec3b2d8f0c6b1a3e"><div class="ttname"><a href="class_cosmos_1_1_event.html#ab7f0502ef916a950ec3b2d8f0c6b1a3e">Cosmos::Event::set_utcexec</a></div><div class="ttdeci">void set_utcexec()</div><div class="ttdoc">Sets Event::utcexec to current time. </div><div class="ttdef"><b>Definition:</b> event.h:102</div></div>
<div class="ttc" id="group__datalib__functions_html_ga5c64b9eafbfadb9af58898a35764e7ed"><div class="ttname"><a href="group__datalib__functions.html#ga5c64b9eafbfadb9af58898a35764e7ed">log_write</a></div><div class="ttdeci">void log_write(string node, string agent, double utc, string extra, string type, string record, string location)</div><div class="ttdoc">Write log entry - full. </div><div class="ttdef"><b>Definition:</b> datalib.cpp:75</div></div>
<div class="ttc" id="propagator__simple_8cpp_html_a65a2d27d476efcf99f7bbd35388ff02e"><div class="ttname"><a href="propagator__simple_8cpp.html#a65a2d27d476efcf99f7bbd35388ff02e">node_name</a></div><div class="ttdeci">string node_name</div><div class="ttdef"><b>Definition:</b> propagator_simple.cpp:50</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_a9cedca544fafdb198ea00ab83a642fb0"><div class="ttname"><a href="class_cosmos_1_1_event.html#a9cedca544fafdb198ea00ab83a642fb0">Cosmos::Event::get_data</a></div><div class="ttdeci">string get_data()</div><div class="ttdoc">Retrieves Event::data. </div><div class="ttdef"><b>Definition:</b> event.h:144</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_a8bf3c30576db73ae0cbfa1f03e4cca1f"><div class="ttname"><a href="class_cosmos_1_1_event.html#a8bf3c30576db73ae0cbfa1f03e4cca1f">Cosmos::Event::set_actual</a></div><div class="ttdeci">void set_actual()</div><div class="ttdoc">Sets Event::flag to indicate the event has actually executed (i.e. EVENT_FLAG_ACTUAL) ...</div><div class="ttdef"><b>Definition:</b> event.h:108</div></div>
<div class="ttc" id="agent__exec_8cpp_html_acebd9a10284791000205f89c6c3d3b76"><div class="ttname"><a href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a></div><div class="ttdeci">static double logdate_exec</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:77</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a5ab7fb21b6d1e099a5d693e2b8e881"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Support::CommandQueue::flush_commands </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Traverse the entire queue of Events, clearing those that have finished. </p>
<p>An Event qualifies to be cleared if its thread could be joined, or if it has been running for more than 1 minute. </p><pre class="fragment">\param  agent   Pointer to Agent object (for call to condition_true(..))
\param  nodename    Name of the node
\param  logdate_exec    Time of execution (for logging purposes)</pre> 
</div>
</div>
<a class="anchor" id="ae1f53c61787e536d17ce6d44674eaad8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Support::CommandQueue::run_commands </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_support_1_1_agent.html">Agent</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>node_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>logdate_exec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Traverse the entire queue of Events, and run those which qualify. </p>
<p>An Event only qualifies to run if the current time is greater than or equal to the execution time of the Event. Further, if the Event is conditional, then the Event condition must be true. </p><pre class="fragment">\param  agent   Pointer to Agent object (for call to condition_true(..))
\param  nodename    Name of the node
\param  logdate_exec    Time of execution (for logging purposes)</pre> <div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">for</span>(std::list&lt;Event&gt;::iterator ii = <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.begin(); ii != <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.end(); ++ii)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="comment">// if command is not solo, or event_threads queue is empty</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">event_threads</a>.empty() || (!ii-&gt;is_solo() &amp;&amp; !<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a0837094e64fc912c254b71ff5fb4f6a9">queue_blocked</a>))</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    <span class="keywordflow">if</span> (ii-&gt;is_solo())</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                        <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a0837094e64fc912c254b71ff5fb4f6a9">queue_blocked</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                        <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a0837094e64fc912c254b71ff5fb4f6a9">queue_blocked</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    <span class="comment">// if command is ready</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    <span class="keywordflow">if</span> (ii-&gt;is_ready())</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                        <span class="comment">// if command is conditional</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                        <span class="keywordflow">if</span> (ii-&gt;is_conditional())</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                        {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                            <span class="comment">// if command condition is true</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                            <span class="keywordflow">if</span>(ii-&gt;condition_true(agent-&gt;<a class="code" href="class_cosmos_1_1_support_1_1_agent.html#a7cbfdf4999c704b895bdf97f4b76b05b">cinfo</a>))</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                            {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                <span class="comment">// if command is repeatable</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                <span class="keywordflow">if</span>(ii-&gt;is_repeat())</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                    <span class="comment">// if command has not already run</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">//                                    if(!ii-&gt;already_ran)</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                    <span class="keywordflow">if</span> (!ii-&gt;is_alreadyrun())</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                    {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                        strncpy(agent-&gt;<a class="code" href="class_cosmos_1_1_support_1_1_agent.html#a7cbfdf4999c704b895bdf97f4b76b05b">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#a933dee4a39f96836865a72324eca7377">lastevent</a>, ii-&gt;name.c_str(), <a class="code" href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                        agent-&gt;<a class="code" href="class_cosmos_1_1_support_1_1_agent.html#a7cbfdf4999c704b895bdf97f4b76b05b">cinfo</a>-&gt;<a class="code" href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">node</a>.<a class="code" href="structnodestruc.html#abd30cbb9e11278888e747c97344d217a">lasteventutc</a> = <a class="code" href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a>();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                        <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a80c91f91ef56306f408fa379d2d7e261">run_command</a>(*ii, <a class="code" href="propagator__simple_8cpp.html#a65a2d27d476efcf99f7bbd35388ff02e">node_name</a>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                        ii-&gt;set_alreadyrun(<span class="keyword">true</span>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                        <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.push_back(*ii);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                        <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.size() &gt; 10)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                        {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.pop_front();</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                        }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">//                                        ii-&gt;already_ran = true;</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                    }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                    <span class="comment">// else command is non-repeatable</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                <span class="keywordflow">else</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                                {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                    <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a80c91f91ef56306f408fa379d2d7e261">run_command</a>(*ii, <a class="code" href="propagator__simple_8cpp.html#a65a2d27d476efcf99f7bbd35388ff02e">node_name</a>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                    <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.push_back(*ii);</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                    <span class="keywordflow">if</span> (<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.size() &gt; 10)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                    {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                        <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">events</a>.pop_front();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                    }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                    <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.erase(ii--);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                <span class="comment">// else command condition is false</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                            }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                            <span class="keywordflow">else</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                            {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                ii-&gt;set_alreadyrun(<span class="keyword">false</span>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                            }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                            <span class="comment">// else command is non-conditional</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                        }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        <span class="keywordflow">else</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                        {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a80c91f91ef56306f408fa379d2d7e261">run_command</a>(*ii, <a class="code" href="propagator__simple_8cpp.html#a65a2d27d476efcf99f7bbd35388ff02e">node_name</a>, <a class="code" href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a>);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.erase(ii--);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                    }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    ;<span class="comment">//cout&lt;&lt;&quot;This command is *NOT* ready to run! &quot;;</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                }</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div><div class="ttc" id="group__defs__storage_html_ga2005202dc256c47dd66042b748fc4dd5"><div class="ttname"><a href="group__defs__storage.html#ga2005202dc256c47dd66042b748fc4dd5">COSMOS_MAX_NAME</a></div><div class="ttdeci">#define COSMOS_MAX_NAME</div><div class="ttdoc">Largest JSON name. </div><div class="ttdef"><b>Definition:</b> cosmos-defs.h:55</div></div>
<div class="ttc" id="structnodestruc_html_a933dee4a39f96836865a72324eca7377"><div class="ttname"><a href="structnodestruc.html#a933dee4a39f96836865a72324eca7377">nodestruc::lastevent</a></div><div class="ttdeci">char lastevent[40+1]</div><div class="ttdoc">Last event. </div><div class="ttdef"><b>Definition:</b> jsondef.h:1721</div></div>
<div class="ttc" id="structcosmosstruc_html_af4e942210d74ec7b18eed16914c366ce"><div class="ttname"><a href="structcosmosstruc.html#af4e942210d74ec7b18eed16914c366ce">cosmosstruc::node</a></div><div class="ttdeci">nodestruc node</div><div class="ttdoc">Structure for summary information in node. </div><div class="ttdef"><b>Definition:</b> jsondef.h:2014</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_ac998b8f0167f6eb5370672f6687a3a0a"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#ac998b8f0167f6eb5370672f6687a3a0a">Cosmos::Support::CommandQueue::event_threads</a></div><div class="ttdeci">vector&lt; std::thread &gt; event_threads</div><div class="ttdef"><b>Definition:</b> command_queue.h:65</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a80c91f91ef56306f408fa379d2d7e261"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a80c91f91ef56306f408fa379d2d7e261">Cosmos::Support::CommandQueue::run_command</a></div><div class="ttdeci">void run_command(Event &amp;cmd, string nodename, double logdate_exec)</div><div class="ttdoc">Run the given Event. </div><div class="ttdef"><b>Definition:</b> command_queue.cpp:155</div></div>
<div class="ttc" id="structnodestruc_html_abd30cbb9e11278888e747c97344d217a"><div class="ttname"><a href="structnodestruc.html#abd30cbb9e11278888e747c97344d217a">nodestruc::lasteventutc</a></div><div class="ttdeci">double lasteventutc</div><div class="ttdoc">Last event UTC. </div><div class="ttdef"><b>Definition:</b> jsondef.h:1723</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a269cd1ec70c4e4c8c61d7f05b17a5b40"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a269cd1ec70c4e4c8c61d7f05b17a5b40">Cosmos::Support::CommandQueue::events</a></div><div class="ttdeci">std::deque&lt; Event &gt; events</div><div class="ttdef"><b>Definition:</b> command_queue.h:63</div></div>
<div class="ttc" id="group__timelib__functions_html_ga39f0682a60fce7940363aad40ad4a244"><div class="ttname"><a href="group__timelib__functions.html#ga39f0682a60fce7940363aad40ad4a244">currentmjd</a></div><div class="ttdeci">double currentmjd(double offset)</div><div class="ttdoc">Current UTC in Modified Julian Days. </div><div class="ttdef"><b>Definition:</b> timelib.cpp:65</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a0837094e64fc912c254b71ff5fb4f6a9"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a0837094e64fc912c254b71ff5fb4f6a9">Cosmos::Support::CommandQueue::queue_blocked</a></div><div class="ttdeci">bool queue_blocked</div><div class="ttdef"><b>Definition:</b> command_queue.h:69</div></div>
<div class="ttc" id="propagator__simple_8cpp_html_a65a2d27d476efcf99f7bbd35388ff02e"><div class="ttname"><a href="propagator__simple_8cpp.html#a65a2d27d476efcf99f7bbd35388ff02e">node_name</a></div><div class="ttdeci">string node_name</div><div class="ttdef"><b>Definition:</b> propagator_simple.cpp:50</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_agent_html_a7cbfdf4999c704b895bdf97f4b76b05b"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_agent.html#a7cbfdf4999c704b895bdf97f4b76b05b">Cosmos::Support::Agent::cinfo</a></div><div class="ttdeci">cosmosstruc * cinfo</div><div class="ttdef"><b>Definition:</b> agentclass.h:348</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
<div class="ttc" id="agent__exec_8cpp_html_acebd9a10284791000205f89c6c3d3b76"><div class="ttname"><a href="agent__exec_8cpp.html#acebd9a10284791000205f89c6c3d3b76">logdate_exec</a></div><div class="ttdeci">static double logdate_exec</div><div class="ttdef"><b>Definition:</b> agent_exec.cpp:77</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af0eaee928fcfdb4d6a6d552b31c17b63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Support::CommandQueue::add_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove <b>all</b> matching <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of Events removed</dd></dl>
<p>JIMNOTE: this only adds given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to the queue if the <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> has flag for EVENT_TYPE_COMMAND set to true </p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.push_back(c);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">queue_changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        }</div><div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3576d5ed46fb8cd4c3bea2e7aa0b976c"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">Cosmos::Support::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:67</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a13a9c4eb7509626e6b686e6240b392d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Cosmos::Support::CommandQueue::del_command </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_event.html">Event</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove <b>all</b> matching <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of Events removed</dd></dl>
<p>This function only removes events from the queue if the are exactly equal to the given <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a>. </p>
<div class="fragment"><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordtype">size_t</span> prev_sz = <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.size();</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">for</span> (std::list&lt;Event&gt;::iterator ii = <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.begin();</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                 ii != <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.end();</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                 ++ii) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <span class="keywordflow">if</span> (c == *ii) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.erase(ii--);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">queue_changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(prev_sz - <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.size());</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="comment">//  int n = 0;</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="comment">//    for(std::list&lt;Event&gt;::iterator ii = commands.begin(); ii != commands.end(); ++ii)</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="comment">//    {</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="comment">//</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="comment">//      if(c==*ii)</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="comment">//      {</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="comment">//            commands.erase(ii--);</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="comment">//          n++;</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="comment">//      }</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="comment">//  }</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="comment">//  queue_changed = true;</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="comment">//  return n;</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div><div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3576d5ed46fb8cd4c3bea2e7aa0b976c"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">Cosmos::Support::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:67</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aab806362559d8d802dd8820b6b218098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Cosmos::Support::CommandQueue::del_command </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> from the queue based on position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>Position of event to remove </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of Events removed</dd></dl>
<p>This function removes events based on their queue position (0-indexed). </p>
<div class="fragment"><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="keywordtype">size_t</span> prev_sz = <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.size();</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            std::list&lt;Event&gt;::iterator <a class="code" href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a> = <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.begin();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            std::advance(b, pos);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.erase(b);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">queue_changed</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(prev_sz - <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.size());</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        }</div><div class="ttc" id="jpegint_8h_html_af320905358fa78701e4cc60b6135601f"><div class="ttname"><a href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a></div><div class="ttdeci">long b</div><div class="ttdef"><b>Definition:</b> jpegint.h:371</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3576d5ed46fb8cd4c3bea2e7aa0b976c"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3576d5ed46fb8cd4c3bea2e7aa0b976c">Cosmos::Support::CommandQueue::queue_changed</a></div><div class="ttdeci">bool queue_changed</div><div class="ttdef"><b>Definition:</b> command_queue.h:67</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2acbc7ef73691a12e7cda7bfbea80c26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Cosmos::Support::CommandQueue::sort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sort the Events in the queue by <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> exectution time. </p>
<p>This function is called after new Events are loaded. </p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{ <a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.sort([](<a class="code" href="class_cosmos_1_1_event.html">Event</a> &amp; c1, <a class="code" href="class_cosmos_1_1_event.html">Event</a> &amp; c2) { <span class="keywordflow">return</span> c1.<a class="code" href="class_cosmos_1_1_event.html#a8f09c08cff8f35ec5061b600e9418d75">getTime</a>() &lt; c2.<a class="code" href="class_cosmos_1_1_event.html#a8f09c08cff8f35ec5061b600e9418d75">getTime</a>(); });    }</div><div class="ttc" id="class_cosmos_1_1_event_html"><div class="ttname"><a href="class_cosmos_1_1_event.html">Cosmos::Event</a></div><div class="ttdoc">Class to manage Event information. </div><div class="ttdef"><b>Definition:</b> event.h:58</div></div>
<div class="ttc" id="class_cosmos_1_1_event_html_a8f09c08cff8f35ec5061b600e9418d75"><div class="ttname"><a href="class_cosmos_1_1_event.html#a8f09c08cff8f35ec5061b600e9418d75">Cosmos::Event::getTime</a></div><div class="ttdeci">string getTime()</div><div class="ttdoc">Retrieves Event::mjd. </div><div class="ttdef"><b>Definition:</b> event.h:132</div></div>
<div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="ae0d60e38f0f82cff185f381857cb76bd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html">CommandQueue</a> &amp;&#160;</td>
          <td class="paramname"><em>cmdq</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extraction operator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>Reference to ostream </td></tr>
    <tr><td class="paramname">cmdq</td><td>Reference to <a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html" title="Class to manage information about a queue of Events. ">CommandQueue</a> (JIMNOTE: should be const, ya?) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Reference to modified ostream</dd></dl>
<p>Writes the given <a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html" title="Class to manage information about a queue of Events. ">CommandQueue</a> to the given output stream (in JSON format) and returns a reference to the modified ostream. </p>
<div class="fragment"><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">for</span>(std::list&lt;Event&gt;::iterator ii = cmdq.<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.begin(); ii != cmdq.<a class="code" href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">commands</a>.end(); ++ii)</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                out &lt;&lt; *ii &lt;&lt; std::endl;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">return</span> out;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        }</div><div class="ttc" id="class_cosmos_1_1_support_1_1_command_queue_html_a3741b27ac40bcb1e1ee5ece3b4b642dd"><div class="ttname"><a href="class_cosmos_1_1_support_1_1_command_queue.html#a3741b27ac40bcb1e1ee5ece3b4b642dd">Cosmos::Support::CommandQueue::commands</a></div><div class="ttdeci">std::list&lt; Event &gt; commands</div><div class="ttdef"><b>Definition:</b> command_queue.h:61</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3741b27ac40bcb1e1ee5ece3b4b642dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="class_cosmos_1_1_event.html">Event</a>&gt; Cosmos::Support::CommandQueue::commands</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>An std::list of members of the <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> class to be run </p>

</div>
</div>
<a class="anchor" id="a269cd1ec70c4e4c8c61d7f05b17a5b40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::deque&lt;<a class="el" href="class_cosmos_1_1_event.html">Event</a>&gt; Cosmos::Support::CommandQueue::events</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>An std::queue of members of the <a class="el" href="class_cosmos_1_1_event.html" title="Class to manage Event information. ">Event</a> class that have run </p>

</div>
</div>
<a class="anchor" id="ac998b8f0167f6eb5370672f6687a3a0a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;std::thread&gt; Cosmos::Support::CommandQueue::event_threads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A vector of all threads spawned to run events </p>

</div>
</div>
<a class="anchor" id="a3576d5ed46fb8cd4c3bea2e7aa0b976c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Cosmos::Support::CommandQueue::queue_changed = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A boolean indicator that the queue has changed </p>

</div>
</div>
<a class="anchor" id="a0837094e64fc912c254b71ff5fb4f6a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Cosmos::Support::CommandQueue::queue_blocked = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="command__queue_8h_source.html">command_queue.h</a></li>
<li><a class="el" href="command__queue_8cpp.html">command_queue.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_cosmos.html">Cosmos</a></li><li class="navelem"><a class="el" href="namespace_cosmos_1_1_support.html">Support</a></li><li class="navelem"><a class="el" href="class_cosmos_1_1_support_1_1_command_queue.html">CommandQueue</a></li>
    <li class="footer">Generated on Sun Oct 4 2020 00:17:41 for COSMOS core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
